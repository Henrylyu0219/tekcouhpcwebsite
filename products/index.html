<!-- products page version 0.2.5 -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Products - TekcoUHPC</title>

  <!-- Fonts -->
  <link rel="stylesheet" href="https://use.typekit.net/jry3xql.css">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <!-- 自动识别 GitHub Pages 项目根 -->
  <script>
    window.__BASE__ = (function () {
      const seg = location.pathname.split('/').filter(Boolean);
      if (location.host.endsWith('github.io') && seg.length > 0) {
        return '/' + seg[0];
      }
      return '';
    })();
  </script>

  <!-- 注入 header.css 和 softload.css -->
  <script>
    (function(BASE){
      function link(href){
        var l=document.createElement('link');
        l.rel='stylesheet';
        l.href=BASE+href;
        document.head.appendChild(l);
      }
      link('/assets/header.css');
      link('/assets/softload.css');
    })(window.__BASE__);
  </script>

  <style>
    :root{ --bg:#fdfcf8; --ink:#0b0b0b; --muted:#6b6b6b; }
    html,body{margin:0;padding:0;background:var(--bg)}
    body{font-family:"Nunito",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;color:var(--ink)}

    .hero{padding:64px 20px 24px;max-width:1200px;margin:0 auto;text-align:center}
    .hero__kicker{margin:0;font-family:"europa","EuropaGrotesk","Nunito",Arial,sans-serif;font-weight:800;letter-spacing:-.01em;font-size:clamp(28px,3.5vw,44px)}
    .hero__sub{margin:12px 0 0;color:var(--muted);font-weight:400;font-size:clamp(14px,2.2vw,16px)}

    .catalog{max-width:1240px;margin:24px auto 96px;padding:0 20px;display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:32px 28px}
    @media (min-width:1400px){.catalog{max-width:1380px;grid-template-columns:repeat(4,minmax(0,1fr))}}
    @media (max-width:960px){.catalog{grid-template-columns:repeat(2,minmax(0,1fr));gap:26px 20px}}
    @media (max-width:560px){.catalog{grid-template-columns:1fr;gap:22px 16px}}

    .tile{display:block;text-decoration:none;color:inherit}
    .tile__figure{position:relative;border-radius:16px;overflow:hidden;outline:1px solid #e7e3dc;box-shadow:0 1px 0 rgba(0,0,0,.02);transition:transform .25s ease,box-shadow .25s ease;aspect-ratio:4/3}
    .tile__figure:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.08)}
    .tile__figure img{width:100%;height:100%;object-fit:cover;display:block}
    .tile__label{position:absolute;left:12px;bottom:12px;margin:0;padding:8px 10px 7px;border-radius:10px;font-weight:700;font-size:clamp(13px,1.8vw,14px);line-height:1;background:rgba(255,255,255,.78);backdrop-filter:saturate(140%) blur(4px)}
  </style>
</head>
<body>
  <!-- Header -->
  <header class="tk-header">
    <div class="tk-header__inner">
      <a class="tk-logo" id="homeLink" aria-label="TekcoUHPC Home">
        <img id="logoImg" alt="TekcoUHPC" />
      </a>

      <nav class="tk-nav tk-nav--desktop">
        <a id="navHome">Home</a>
        <a class="is-active" id="navProducts">Products</a>
        <a id="navContact">Contact</a>
      </nav>

      <button class="tk-burger" aria-label="Open Menu" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>
    </div>

    <nav class="tk-nav tk-nav--mobile" hidden>
      <a id="mnavHome">Home</a>
      <a class="is-active" id="mnavProducts">Products</a>
      <a id="mnavContact">Contact</a>
    </nav>
  </header>

  <main class="page-products">
    <section class="hero">
      <h1 class="hero__kicker">Our products</h1>
      <p class="hero__sub">Curated UHPC surfaces and textures for architecture &amp; interiors</p>
    </section>

    <section class="catalog fx-softload" id="catalog"></section>
  </main>

  <!-- 注入 header.js 和 softload.js -->
  <script>
    (function(BASE){
      function js(src){
        var s=document.createElement('script');
        s.src=BASE+src;
        document.body.appendChild(s);
      }
      js('/assets/header.js');
      js('/assets/softload.js');
    })(window.__BASE__);
  </script>

  <!-- 渲染逻辑 -->
  <script type="module">
    const BASE = window.__BASE__ || '';

    // 修正 header logo 与导航
    document.getElementById('homeLink').href = BASE + '/index.html';
    document.getElementById('logoImg').src   = BASE + '/assets/logo.svg';
    document.getElementById('navHome').href  = BASE + '/index.html';
    document.getElementById('navProducts').href = BASE + '/products/index.html';
    document.getElementById('navContact').href  = BASE + '/contact/index.html';
    document.getElementById('mnavHome').href = BASE + '/index.html';
    document.getElementById('mnavProducts').href = BASE + '/products/index.html';
    document.getElementById('mnavContact').href  = BASE + '/contact/index.html';

    async function renderCatalog(){
      try{
        const res = await fetch(BASE + '/assets/products.json', { cache: 'no-cache' });
        if(!res.ok) throw new Error(res.status);
        const items = await res.json();

        const html = items.map(({name, slug, img}) => `
          <a class="tile" href="./${slug}.html">
            <figure class="tile__figure">
              <img loading="lazy" src="${BASE}/img/ProductsCover/${img}" alt="${name}" />
              <figcaption class="tile__label">${name}</figcaption>
            </figure>
          </a>
        `).join('');

        document.getElementById('catalog').innerHTML = html;
        if (window.tkSoftloadInit) window.tkSoftloadInit(document);
      }catch(err){
        console.error(err);
        document.getElementById('catalog').innerHTML = '<p style="color:#888">Failed to load products.</p>';
      }
    }
    renderCatalog();
  </script>
</body>
</html>
